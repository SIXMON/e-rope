        <html>
            <head>
                <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,600,400italic,600italic,700,700italic,800italic' rel='stylesheet' type='text/css'>
                <!-- Latest compiled and minified CSS -->
                <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

                <!-- Optional theme -->
                <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

                <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>

                <!-- Latest compiled and minified JavaScript -->
                <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
                
                <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

                <script src="raphael-2.1.4.min.js"></script>
                <script src="justgage.js"></script>

                <style>

                body {
                    font-family: 'Open Sans', sans-serif;
                }

                .hidden{
                    visibility: hidden;
                }

                .rope{
                    cursor: pointer;
                }

                h1{
                    margin: auto;
                    display: block;
                    width: 100%;
                    text-align: center;
                }

                h2{
                    margin: auto;
                    display: block;
                    width: 100%;
                    text-align: center;
                }

                svg {
                    margin:auto;
                    width:100%;
                }

                #container{
                    position: relative;
                    margin-top: 20px;
                }

                .gauge{
                    /*width:100px; 
                    height:60px;*/
                    position: absolute;
                }

                #ack {
                    /*position: absolute;
                    top:40px;
                    left:80px;*/
                    margin: auto;
                    text-align: center;
                    padding-top: 160px;
                    margin-top: -70px;
                }

                #chart_div{
                    margin-top: 46px;
                }

                #gauge_rope1{
                    top:230px;
                    left:110px;
                }

                #gauge_rope2{
                    top:230px;
                    left:310px;   
                }

                #gauge_rope3{
                    top:230px;
                    left:510px;   
                }

                #gauge_rope4{
                    top:230px;
                    left:1100px;   
                }

                #gauge_rope5{
                    top:230px;
                    left:1300px;   
                }

                #gauge_rope6{
                    top:230px;
                    left:1500px;   
                }

                #alarm-container{
                    margin-top:30px;
                    width:50%;
                    margin:auto;
                    position: absolute;
                    left: 0;
                    right: 0;
                    margin: 0 auto;
                }

                .alert span{
                    display: inline-block;
                    padding: 0 10px;
                }

                .moor-solution img{
                    width: 400px;
                    margin-left: 80px;
                    margin-top: 50px;
                }

                #captain{
                    position: absolute;
                    top: -75px;
                    right: 55px;
                    width:200px;
                    display: none;
                }

                </style>
            </head>
            <body>
            <h1>
                E-ROPE
            </h1>
            <h2>
                Mooring Monitoring System.
            </h2>
            
              <div id="container">                             
                   <div id="alarm-container">
                        <div class="row">
                            <div class="col-md-10">
                                <div class="alert alert-warning" role="alert"><strong>Warning !</strong><span>&nbsp;High tension on front breast mooring line</span></div>
                                <div class="alert alert-danger" role="alert"><strong>ALERT !</strong><span>&nbsp;Dangerous tension on head mooring line</span><strong><a href="#" class="fix">fix</a><strong></div>                        
                            </div>
                            <div class="col-md-2">
                                <div id="ack">
                                    <a class="btn btn-success ack-button" href="javascript:;">ACK</a>
                                </div>    
                            </div>
                        </div>
                    </div>       
                    <div>
                        <img id="captain" src="captain.gif"></img>
                    </div>
                <div id="gauge_rope1" class="gauge"></div>
                <div id="gauge_rope2" class="gauge"></div>
                <div id="gauge_rope3" class="gauge"></div>
                <div id="gauge_rope4" class="gauge"></div>
                <div id="gauge_rope5" class="gauge"></div>
                <div id="gauge_rope6" class="gauge"></div>
        <svg id="main-svg"
           xmlns:dc="http://purl.org/dc/elements/1.1/"
           xmlns:cc="http://creativecommons.org/ns#"
           xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
           xmlns:svg="http://www.w3.org/2000/svg"
           xmlns="http://www.w3.org/2000/svg"
           xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
           xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
           viewBox="0 0 744.09448819 1052.3622047"
           id="svg2"
           version="1.1"
           inkscape:version="0.91 r13725"
           sodipodi:docname="e-rope.svg">
          <defs
             id="defs4" />
          <sodipodi:namedview
             id="base"
             pagecolor="#ffffff"
             bordercolor="#666666"
             borderopacity="1.0"
             inkscape:pageopacity="0.0"
             inkscape:pageshadow="2"
             inkscape:zoom="7.9195959"
             inkscape:cx="585.01204"
             inkscape:cy="849.22043"
             inkscape:document-units="px"
             inkscape:current-layer="layer1"
             showgrid="false"
             inkscape:window-width="1920"
             inkscape:window-height="1017"
             inkscape:window-x="-8"
             inkscape:window-y="-8"
             inkscape:window-maximized="1" />
          <metadata
             id="metadata7">
            <rdf:RDF>
              <cc:Work
                 rdf:about="">
                <dc:format>image/svg+xml</dc:format>
                <dc:type
                   rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
                <dc:title />
              </cc:Work>
            </rdf:RDF>
          </metadata>
          <g
             inkscape:label="Calque 1"
             inkscape:groupmode="layer"
             id="layer1">
            <rect
               style="fill:#dddddd;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.63314259px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
               id="rect3336"
               width="660"
               height="109.57862"
               x="44.463814"
               y="56.563236" />
            <g
               id="g4155"
               transform="matrix(1.1048393,0,0,1,-15.719194,0.95938983)">
              <rect
                 inkscape:transform-center-y="21.432144"
                 inkscape:transform-center-x="37.502944"
                 y="219.41357"
                 x="160.53641"
                 height="61.775005"
                 width="293.09991"
                 id="rect3336-6"
                 style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:0.84430116px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
              <ellipse
                 ry="31.345367"
                 rx="59.21648"
                 cy="250.33171"
                 cx="456.26736"
                 id="path4153"
                 style="fill:#000000;fill-opacity:1" />
            </g>
            <g
               id="g4178"
               transform="translate(-26.263966,-201.02036)">
              <rect
                 y="351.64792"
                 x="94.285713"
                 height="4.6428571"
                 width="26.428572"
                 id="rect4159"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
              <rect
                 y="344.32651"
                 x="98.928574"
                 height="8.5714283"
                 width="17.678572"
                 id="rect4159-2"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
              <rect
                 rx="6.7368422"
                 y="340.57648"
                 x="96.25"
                 height="6.0714288"
                 width="22.857141"
                 id="rect4176"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
            </g>
            <g
               id="g4178-4"
               transform="translate(124.83509,-201.18841)">
              <rect
                 y="351.64792"
                 x="94.285713"
                 height="4.6428571"
                 width="26.428572"
                 id="rect4159-9"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
              <rect
                 y="344.32651"
                 x="98.928574"
                 height="8.5714283"
                 width="17.678572"
                 id="rect4159-2-5"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
              <rect
                 rx="6.7368422"
                 y="340.57648"
                 x="96.25"
                 height="6.0714288"
                 width="22.857141"
                 id="rect4176-2"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
            </g>
            <g
               id="g4178-41"
               transform="translate(52.104103,-201.18841)">
              <rect
                 y="351.64792"
                 x="94.285713"
                 height="4.6428571"
                 width="26.428572"
                 id="rect4159-96"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
              <rect
                 y="344.32651"
                 x="98.928574"
                 height="8.5714283"
                 width="17.678572"
                 id="rect4159-2-9"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
              <rect
                 rx="6.7368422"
                 y="340.57648"
                 x="96.25"
                 height="6.0714288"
                 width="22.857141"
                 id="rect4176-3"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
            </g>
            <g
               id="g4178-8"
               transform="translate(367.66476,-199.55883)">
              <rect
                 y="351.64792"
                 x="94.285713"
                 height="4.6428571"
                 width="26.428572"
                 id="rect4159-8"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
              <rect
                 y="344.32651"
                 x="98.928574"
                 height="8.5714283"
                 width="17.678572"
                 id="rect4159-2-1"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
              <rect
                 rx="6.7368422"
                 y="340.57648"
                 x="96.25"
                 height="6.0714288"
                 width="22.857141"
                 id="rect4176-9"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
            </g>
            <g
               id="g4178-4-7"
               transform="translate(518.76381,-199.72688)">
              <rect
                 y="351.64792"
                 x="94.285713"
                 height="4.6428571"
                 width="26.428572"
                 id="rect4159-9-2"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
              <rect
                 y="344.32651"
                 x="98.928574"
                 height="8.5714283"
                 width="17.678572"
                 id="rect4159-2-5-3"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
              <rect
                 rx="6.7368422"
                 y="340.57648"
                 x="96.25"
                 height="6.0714288"
                 width="22.857141"
                 id="rect4176-2-0"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
            </g>
            <g
               id="g4178-41-5"
               transform="translate(446.03283,-199.72688)">
              <rect
                 y="351.64792"
                 x="94.285713"
                 height="4.6428571"
                 width="26.428572"
                 id="rect4159-96-9"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
              <rect
                 y="344.32651"
                 x="98.928574"
                 height="8.5714283"
                 width="17.678572"
                 id="rect4159-2-9-1"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
              <rect
                 rx="6.7368422"
                 y="340.57648"
                 x="96.25"
                 height="6.0714288"
                 width="22.857141"
                 id="rect4176-3-3"
                 style="fill:#000000;fill-opacity:1;stroke:none" />
            </g>
            <path
               style="fill:none;fill-rule:evenodd;stroke:#00B200;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
               d="M 80.307127,150.29598 164.14979,279.59551"
               id="ROPE_1"
               class="rope"
               onclick="ShowRopeInfo('rope1')"
               inkscape:connector-curvature="0" />
            <path
               style="fill:none;fill-rule:evenodd;stroke:#00B200;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
               d="m 157.07872,150.29598 4.54569,98.99495"
               id="ROPE_2"
               class="rope"
               onclick="ShowRopeInfo('rope2')"
               inkscape:connector-curvature="0" />
            <path
               style="fill:none;fill-rule:evenodd;stroke:#00B200;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
               d="m 166.67517,224.54219 65.15484,-76.26651"
               id="ROPE_3"
               class="rope"
               onclick="ShowRopeInfo('rope3')"
               inkscape:connector-curvature="0" />
            <path
               style="fill:none;fill-rule:evenodd;stroke:#00B200;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
               d="m 476.792,150.80106 71.21576,91.4188"
               id="ROPE_4"
               class="rope"
               onclick="ShowRopeInfo('rope4')"
               inkscape:connector-curvature="0" />
            <path
               style="fill:none;fill-rule:evenodd;stroke:#FFA500;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
               d="m 551.03821,248.91212 3.283,-95.58568"
               id="ROPE_5"
               class="rope"
               onclick="ShowRopeInfo('rope5')"
               inkscape:connector-curvature="0" />
            <path
               style="fill:none;fill-rule:evenodd;stroke:#E50000;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
               d="M 550.53314,250.93243 627.55727,153.0739"
               id="ROPE_6"
               class="rope"
               onclick="ShowRopeInfo('rope6')"
               inkscape:connector-curvature="0" />
          </g>
        </svg>       
        </div>
     <!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">ROPE Information</h4>
      </div>
      <div class="modal-body">
        <div class="row">
            <div class="col-md-10">
                <p>Moor Type : Nylon</p>
                <p>BreakLoad : 50 tons</p>
                <p>Current Load : <span class="current-load"></span></p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <div id="chart_div" style="width: 200px; height: 200px;"></div>
            </div>
            <div class="col-md-9">
                <div id="curve_chart" style="width: 600px; height: 300px"></div>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
  <div class="modal fade" id="fixModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">FIX</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <h2>Add new second front moor line</h2>
            <div class="moor-solution">
                <img src="moor-solution.png"></img>
            </div>
            <h2>Or request TUG for assistance</h2>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
            <script type="text/javascript">

                var selectedRope = null, gaugeTopOffset = 80, svgTopOffset = 100;
                google.charts.load('current', {'packages':['gauge','corechart']});
                //google.charts.setOnLoadCallback(drawChart);
                var ropes = [
                    {
                        name : "gauge_rope1",
                        value : 17.38,
                        label : "STERN",
                        pos : 62
                    },
                    {
                        name : "gauge_rope2",
                        label : "BREAST",
                        value : 19.86,
                        pos : 166
                    },
                    {
                        name : "gauge_rope3",
                        value : 22.37,
                        label : "SPRING",
                        pos : 264
                    },
                    {
                        name : "gauge_rope4",
                        value : 17.81,
                        label : "SPRING",
                        pos : 590
                    },
                    {
                        name : "gauge_rope5",
                        value : 31.89,
                        label : "BREAST",
                        pos : 694
                    },
                    {
                        name : "gauge_rope6",
                        value : 42.87,
                        label : "HEAD",
                        pos : 792
                    },
                ]

                var ShowRopeInfo = function(rope){
                    $('#myModal').modal('show');
                    selectedRope = parseInt(rope.replace("rope","")) - 1;
                }
                var svgWidth = $("#main-svg").width();
                var svgHeight = $("#main-svg").height();
                $("#main-svg").css("margin-top",svgTopOffset.toString()  + "px")
                for(var i=0;i<6;i++){
                    var leftOffset = ropes[i].pos * svgWidth / 1000;
                    var topOffset = (gaugeTopOffset * svgHeight / 1000) + 80;
                    var height = 60 * svgHeight / 1000;
                    var width = 100 * svgWidth / 1000;
                    $("#gauge_rope" + (i+1).toString()).css("left", leftOffset);
                    $("#gauge_rope" + (i+1).toString()).css("top", topOffset);
                    //$("#gauge_rope" + (i+1).toString()).css("width", (svgWidth / 10).toString() + "px");
                    $("#gauge_rope" + (i+1).toString()).width(width);
                    $("#gauge_rope" + (i+1).toString()).height(height);

                    new JustGage({
                        id: "gauge_rope" + (i+1).toString(),
                        value: ropes[i].value,
                        min: 0,
                        max: 50,
                        title: ropes[i].label,
                        titleFontColor: "#000000",
                        valueFontColor: "#000000",
                        labelFontColor: "#000000"
                    });
                }

                // MODAL ON LOAD
                $('#myModal').on('shown.bs.modal', function (e) {
                    drawChart();
                    drawLineChart();
                });
                
                function drawChart() {
                    
                    if(selectedRope != null){
                        var data = google.visualization.arrayToDataTable([
                            ['Label', 'Value'],
                            ['Tension', ropes[selectedRope].value]
                        ]);

                        var options = {
                          width: 200, 
                          height: 300,
                          redFrom: 40, 
                          redTo: 50,
                          yellowFrom:30, yellowTo: 40,
                          minorTicks: 5, max: 50
                        };

                        var chart = new google.visualization.Gauge(document.getElementById('chart_div'));

                        chart.draw(data, options);

                        $(".current-load").text(ropes[selectedRope].value + " tons");
                    }
                }

                function drawLineChart(){

                    var data = new google.visualization.DataTable();
                    data.addColumn('date', 'Time of Day');
                    data.addColumn('number', 'Tension');

                    data.addRows([
                        [new Date(2015, 0, 1), 5],  [new Date(2015, 0, 2), 7],  [new Date(2015, 0, 3), 3],
                        [new Date(2015, 0, 4), 1],  [new Date(2015, 0, 5), 3],  [new Date(2015, 0, 6), 4],
                        [new Date(2015, 0, 7), 3],  [new Date(2015, 0, 8), 4],  [new Date(2015, 0, 9), 2],
                        [new Date(2015, 0, 10), 5], [new Date(2015, 0, 11), 8], [new Date(2015, 0, 12), 6],
                        [new Date(2015, 0, 13), 3], [new Date(2015, 0, 14), 3], [new Date(2015, 0, 15), 5],
                        [new Date(2015, 0, 16), 7], [new Date(2015, 0, 17), 6], [new Date(2015, 0, 18), 6],
                        [new Date(2015, 0, 19), 3], [new Date(2015, 0, 20), 1], [new Date(2015, 0, 21), 2],
                        [new Date(2015, 0, 22), 4], [new Date(2015, 0, 23), 6], [new Date(2015, 0, 24), 5],
                        [new Date(2015, 0, 25), 9], [new Date(2015, 0, 26), 4], [new Date(2015, 0, 27), 9],
                        [new Date(2015, 0, 28), 8], [new Date(2015, 0, 29), 6], [new Date(2015, 0, 30), 4],
                        [new Date(2015, 0, 31), 6], [new Date(2015, 1, 1), 7],  [new Date(2015, 1, 2), 9]
                    ]);


                    var options = {
                      title: 'Rope Tension History',
                      width: 600,
                      height: 300,
                     hAxis: {
                        viewWindow: {
                        min: new Date(2015, 0, 1, 0),
                        max: new Date(2015, 1, 2, 9)
                        },
                        gridlines: {
                        count: -1,
                        units: {
                          days: {format: ['MMM dd']},
                          hours: {format: ['HH:mm', 'ha']},
                        }
                        },
                        minorGridlines: {
                        units: {
                          hours: {format: ['hh:mm:ss a', 'ha']},
                          minutes: {format: ['HH:mm a Z', ':mm']}
                        }
                        }
                        }
                    };

                    var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

                    chart.draw(data, options);

                }

                var isBlinking = true;
                var blinkAlert;
                var blink = function(){
                    blinkAlert = setInterval(function(){
                    $(".alert").toggleClass("hidden");
                        },500);
                }
                
                $(".ack-button").on("click", function(){                    
                    isBlinking = !isBlinking;
                    if(isBlinking == true){
                        blink();
                    }
                    else{
                        clearInterval(blinkAlert);
                    }
                    $("#captain").show().delay(3000).fadeOut();
                });

                $(".fix").on("click", function(){
                    $('#fixModal').modal('show');
                });

                blink();

            </script>

        </body>
    </html>